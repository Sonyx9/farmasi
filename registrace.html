<!DOCTYPE html>
<html lang="cs" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Registrace a kontakt pro Farmasi. Zanechte nám zprávu přes formulář a ozveme se vám zpět s informacemi k registraci, produktům nebo objednávce." />
  <link rel="icon" type="image/x-icon" href="favicon.ico" />
  <title>Registrace Farmasi | Kontakt a dotazy | Freedom Fashion</title>
  
  <!-- Open Graph / Facebook -->
  <meta property="og:title" content="Registrace Farmasi – sleva 23 % na kosmetiku" />
  <meta property="og:description" content="Zaregistrujte se zdarma do Farmasi a získejte okamžitou slevu 23 % na všechny produkty. Registrace je nezávazná a zabere jen pár minut." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://farmasi.freedomfashion.cz/registrace.html" />
  <meta property="og:image" content="https://farmasi.freedomfashion.cz/og-registrace.webp" />
  <meta property="og:image:alt" content="Portrét ženy s dlouhými světle plavými vlasy a jemným úsměvem, obklopené květinami v rozmazaném pozadí" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:image:type" content="image/webp" />
  <meta property="og:locale" content="cs_CZ" />
  <meta property="og:site_name" content="Farmasi – Freedom Fashion" />
  
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Registrace Farmasi – sleva 23 % zdarma" />
  <meta name="twitter:description" content="Získejte 23% slevu na Farmasi kosmetiku. Registrace zdarma, bez závazků, hotovo za 2 minuty." />
  <meta name="twitter:image" content="https://farmasi.freedomfashion.cz/og-registrace.webp" />
  <meta name="twitter:image:alt" content="Portrét ženy s dlouhými světle plavými vlasy a jemným úsměvem, obklopené květinami v rozmazaném pozadí" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'farmasi-pink': '#F8E8E8',
            'farmasi-rose': '#E8B4B8',
            'farmasi-gold': '#D4AF37',
            'farmasi-dark': '#2C2C2C',
          },
          fontFamily: {
            'elegant': ['Georgia', 'serif'],
          }
        }
      }
    }
  </script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600&family=Montserrat:wght@300;400;500;600&display=swap');
    
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #FFF5F5 0%, #F8E8E8 100%);
      min-height: 100vh;
    }
    
    h1, h2, h3 {
      font-family: 'Playfair Display', serif;
    }
    
    .gold-accent {
      color: #D4AF37;
    }
    
    .hero-gradient {
      background: linear-gradient(135deg, #FFF5F5 0%, #F8E8E8 100%);
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #E8B4B8 0%, #D4A5A9 100%);
      transition: all 0.3s ease;
    }
    
    .btn-primary:hover:not(:disabled) {
      background: #D4AF37;
      color: white !important;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(212, 175, 55, 0.4);
    }
    
    .btn-primary:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
    
    .form-input {
      transition: all 0.3s ease;
    }
    
    .form-input:focus {
      border-color: #E8B4B8;
      box-shadow: 0 0 0 3px rgba(232, 180, 184, 0.1);
      outline: none;
    }
    
    .error-message {
      color: #dc2626;
      font-size: 0.875rem;
      margin-top: 0.25rem;
    }
    
    .success-message {
      color: #16a34a;
      font-size: 0.875rem;
      margin-top: 0.5rem;
      padding: 0.75rem;
      background-color: #f0fdf4;
      border: 1px solid #86efac;
      border-radius: 0.5rem;
    }
    
    .honeypot {
      position: absolute;
      left: -9999px;
      opacity: 0;
      pointer-events: none;
    }
  </style>
</head>
<body class="font-sans text-gray-800 bg-gray-50 relative">
  <div class="fixed inset-0 bg-center bg-cover opacity-5 pointer-events-none" style="background-image: url('https://images.unsplash.com/photo-1596462502278-27bfdc403348?w=1920'); z-index: 0;"></div>
  <!-- Header -->
  <header class="relative bg-white shadow-sm border-b border-farmasi-pink z-10">
    <nav class="max-w-7xl mx-auto flex items-center justify-between px-4 py-4 lg:px-8">
      <a href="/" class="flex flex-col items-start logo-container">
        <img 
          src="https://content.farmasi.com/js/CZ-20260105124805-5a1cba1a-b3cb-41bc-b187-c01bd35b5c60/_next/static/media/logoText.f15a2acb.svg" 
          alt="Farmasi" 
          class="h-5 md:h-6 logo-image"
        />
        <span class="text-gray-500 font-light mt-0.5 logo-tagline" style="font-family: 'Montserrat', sans-serif; text-transform: uppercase;">Freedom fashion</span>
      </a>
      <a href="/" class="text-gray-700 hover:text-farmasi-rose transition-colors text-sm font-medium">
        ← Zpět na hlavní stránku
      </a>
    </nav>
  </header>

  <main class="relative z-10">
    <!-- Registration Section -->
    <section class="relative pt-[17px] pb-8 hero-gradient">
      <div class="relative max-w-2xl mx-auto px-4 w-full z-10">
        <div class="bg-white rounded-2xl shadow-xl p-6 md:p-8">
          <!-- Header -->
          <div class="text-center mb-6">
            <h1 class="text-2xl md:text-3xl font-bold mb-2 text-farmasi-dark">
              Registrace / <span class="gold-accent">Kontakt</span>
            </h1>
            <p class="text-sm text-gray-600">
              Zanechte nám zprávu a my se vám ozveme
            </p>
          </div>

          <!-- Messages -->
          <div id="form-messages" class="mb-4"></div>

          <form id="contact-form" class="space-y-4" novalidate>
            <!-- Jméno a příjmení -->
            <div>
              <label for="name" class="block text-xs font-medium text-gray-700 mb-1">
                Jméno a příjmení <span class="text-red-500">*</span>
              </label>
              <input
                type="text"
                id="name"
                name="name"
                required
                class="form-input w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-farmasi-rose focus:border-farmasi-rose"
                placeholder="Zadejte jméno a příjmení"
              />
              <div id="name-error" class="error-message"></div>
            </div>

            <!-- Grid: Email a Telefon -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <!-- Email -->
              <div>
                <label for="email" class="block text-xs font-medium text-gray-700 mb-1">
                  E-mail
                </label>
                <input
                  type="email"
                  id="email"
                  name="email"
                  class="form-input w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-farmasi-rose focus:border-farmasi-rose"
                  placeholder="vas@email.cz"
                />
                <div id="email-error" class="error-message"></div>
              </div>

              <!-- Telefon -->
              <div>
                <label for="phone" class="block text-xs font-medium text-gray-700 mb-1">
                  Telefon <span class="text-red-500">*</span>
                </label>
                <div class="flex">
                  <span class="inline-flex items-center px-2 rounded-l-lg border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-xs">
                    +420
                  </span>
                  <input
                    type="tel"
                    id="phone"
                    name="phone"
                    required
                    class="form-input flex-1 px-3 py-2 text-sm border border-gray-300 rounded-r-lg focus:ring-2 focus:ring-farmasi-rose focus:border-farmasi-rose"
                    placeholder="776 487 352"
                    pattern="[0-9]{9}"
                  />
                </div>
                <div id="phone-error" class="error-message"></div>
              </div>
            </div>

            <!-- Contact validation message -->
            <div id="contact-error" class="error-message"></div>

            <!-- Zpráva / Poznámka -->
            <div>
              <label for="message" class="block text-xs font-medium text-gray-700 mb-1">
                Zpráva / Poznámka <span class="text-red-500">*</span>
              </label>
              <textarea
                id="message"
                name="message"
                required
                rows="3"
                class="form-input w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-farmasi-rose focus:border-farmasi-rose resize-none"
                placeholder="Vaše zpráva nebo poznámka"
              ></textarea>
              <div id="message-error" class="error-message"></div>
            </div>

            <!-- GDPR Checkbox -->
            <div>
              <label class="flex items-start gap-2 cursor-pointer">
                <input
                  type="checkbox"
                  id="gdpr"
                  name="gdpr"
                  required
                  class="mt-1 w-4 h-4 text-farmasi-rose border-gray-300 rounded focus:ring-farmasi-rose"
                />
                <span class="text-xs text-gray-700">
                  Souhlasím se <a href="https://www.freedomfashion.cz/podminky-ochrany-osobnich-udaju/" target="_blank" class="text-farmasi-rose hover:underline">zpracováním osobních údajů</a> <span class="text-red-500">*</span>
                </span>
              </label>
              <div id="gdpr-error" class="error-message"></div>
            </div>

            <!-- Hidden fields -->
            <input type="hidden" id="source" name="source" />
            <input type="text" id="website" name="website" class="honeypot" tabindex="-1" autocomplete="off" />

            <!-- Submit Button -->
            <div class="pt-2">
              <button
                type="submit"
                id="submit-btn"
                class="btn-primary w-full text-white font-semibold px-6 py-3 rounded-lg text-base shadow-lg"
              >
                Odeslat
              </button>
            </div>
          </form>
        </div>
      </div>
    </section>

    <!-- FAQ Section -->
    <section class="relative py-12 hero-gradient">
      <div class="relative max-w-4xl mx-auto px-4 w-full z-10">
        <div class="bg-white rounded-2xl shadow-xl p-6 md:p-8">
          <h2 class="text-2xl md:text-3xl font-bold mb-6 text-center text-farmasi-dark">
            Nejčastější dotazy k <span class="gold-accent">registraci</span> do Farmasi
          </h2>
          
          <div class="space-y-6">
            <!-- FAQ Item 1 -->
            <div class="border-b border-gray-200 pb-4">
              <h3 class="text-lg font-semibold text-farmasi-dark mb-2">Co mi registrace do Farmasi přinese?</h3>
              <p class="text-gray-700 text-sm leading-relaxed">Registrací získáte okamžitou slevu 23 % na všechny produkty Farmasi. Zároveň máte možnost výhodně nakupovat dlouhodobě a případně si přivydělat doporučováním produktů.</p>
            </div>

            <!-- FAQ Item 2 -->
            <div class="border-b border-gray-200 pb-4">
              <h3 class="text-lg font-semibold text-farmasi-dark mb-2">Je registrace do Farmasi zdarma?</h3>
              <p class="text-gray-700 text-sm leading-relaxed">Ano. Registrace je zcela zdarma a není s ní spojen žádný vstupní poplatek ani povinné nákupy.</p>
            </div>

            <!-- FAQ Item 3 -->
            <div class="border-b border-gray-200 pb-4">
              <h3 class="text-lg font-semibold text-farmasi-dark mb-2">Musím po registraci kosmetiku prodávat?</h3>
              <p class="text-gray-700 text-sm leading-relaxed">Ne. Registrace vás k ničemu nezavazuje. Mnoho zákaznic se registruje pouze proto, aby mohly nakupovat kosmetiku se slevou pro vlastní potřebu.</p>
            </div>

            <!-- FAQ Item 4 -->
            <div class="border-b border-gray-200 pb-4">
              <h3 class="text-lg font-semibold text-farmasi-dark mb-2">Jak dlouho registrace trvá?</h3>
              <p class="text-gray-700 text-sm leading-relaxed">Registrace je velmi rychlá a jednoduchá. Zabere přibližně 2 minuty a výhody můžete využívat ihned po dokončení.</p>
            </div>

            <!-- FAQ Item 5 -->
            <div class="border-b border-gray-200 pb-4">
              <h3 class="text-lg font-semibold text-farmasi-dark mb-2">Mohu se zaregistrovat, i když chci jen slevu?</h3>
              <p class="text-gray-700 text-sm leading-relaxed">Ano. Registrace je ideální i pro ty, kteří chtějí pouze výhodně nakupovat a neřeší přivýdělek ani budování týmu.</p>
            </div>

            <!-- FAQ Item 6 -->
            <div class="border-b border-gray-200 pb-4">
              <h3 class="text-lg font-semibold text-farmasi-dark mb-2">Jak funguje sleva 23 %?</h3>
              <p class="text-gray-700 text-sm leading-relaxed">Po registraci se vám automaticky odečte 23% sleva z cen produktů při nákupu. Sleva platí na celý sortiment Farmasi.</p>
            </div>

            <!-- FAQ Item 7 -->
            <div class="border-b border-gray-200 pb-4">
              <h3 class="text-lg font-semibold text-farmasi-dark mb-2">Je registrace časově nebo smluvně vázaná?</h3>
              <p class="text-gray-700 text-sm leading-relaxed">Ne. Registrace není časově omezená a neobsahuje žádné smluvní závazky. Kdykoliv můžete přestat nakupovat nebo být neaktivní.</p>
            </div>

            <!-- FAQ Item 8 -->
            <div class="border-b border-gray-200 pb-4">
              <h3 class="text-lg font-semibold text-farmasi-dark mb-2">Mohu se později rozhodnout pro spolupráci?</h3>
              <p class="text-gray-700 text-sm leading-relaxed">Ano. Pokud se později rozhodnete produkty doporučovat nebo budovat tým, máte tuto možnost. Není to ale podmínkou registrace.</p>
            </div>

            <!-- FAQ Item 9 -->
            <div class="border-b border-gray-200 pb-4">
              <h3 class="text-lg font-semibold text-farmasi-dark mb-2">Jak mi pomůžete s registrací nebo výběrem produktů?</h3>
              <p class="text-gray-700 text-sm leading-relaxed">Pokud si nejste jistí, rádi vám poradíme s registrací i výběrem kosmetiky. Stačí nás kontaktovat přes formulář, e-mail nebo telefon.</p>
            </div>

            <!-- FAQ Item 10 -->
            <div class="border-b border-gray-200 pb-4">
              <h3 class="text-lg font-semibold text-farmasi-dark mb-2">Pro koho je registrace Farmasi vhodná?</h3>
              <p class="text-gray-700 text-sm leading-relaxed">Registrace je vhodná pro:</p>
              <ul class="list-disc list-inside text-gray-700 text-sm mt-2 space-y-1 ml-4">
                <li>ženy, které chtějí kvalitní kosmetiku se slevou</li>
                <li>zákaznice hledající dlouhodobě výhodný nákup</li>
                <li>ty, kteří zvažují nezávazný přivýdělek</li>
              </ul>
            </div>

            <!-- FAQ Item 11 -->
            <div class="pb-4">
              <h3 class="text-lg font-semibold text-farmasi-dark mb-2">Mohu se kdykoliv odhlásit?</h3>
              <p class="text-gray-700 text-sm leading-relaxed">Ano. Pokud se rozhodnete Farmasi dále nevyužívat, žádné další kroky nejsou nutné – registrace vás k ničemu nezavazuje.</p>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "WebSite",
        "@id": "https://farmasi.freedomfashion.cz/#website",
        "url": "https://farmasi.freedomfashion.cz/",
        "name": "Farmasi – Freedom Fashion",
        "inLanguage": "cs-CZ"
      },
      {
        "@type": "Organization",
        "@id": "https://farmasi.freedomfashion.cz/#organization",
        "name": "Freedom Fashion",
        "url": "https://farmasi.freedomfashion.cz/",
        "email": "farmasi@freedomfashion.cz",
        "telephone": "+420776487352",
        "contactPoint": [
          {
            "@type": "ContactPoint",
            "contactType": "customer support",
            "telephone": "+420776487352",
            "email": "farmasi@freedomfashion.cz",
            "availableLanguage": ["cs"],
            "areaServed": "CZ"
          }
        ]
      },
      {
        "@type": "ContactPage",
        "@id": "https://farmasi.freedomfashion.cz/registrace.html#webpage",
        "url": "https://farmasi.freedomfashion.cz/registrace.html",
        "name": "Registrace / Kontakt | Farmasi",
        "description": "Registrace a kontakt pro Farmasi. Zanechte nám zprávu přes formulář a ozveme se vám zpět.",
        "isPartOf": {
          "@id": "https://farmasi.freedomfashion.cz/#website"
        },
        "about": [
          { "@type": "Thing", "name": "Registrace Farmasi" },
          { "@type": "Thing", "name": "Kontakt Farmasi" },
          { "@type": "Thing", "name": "Kosmetika Farmasi" }
        ],
        "publisher": {
          "@id": "https://farmasi.freedomfashion.cz/#organization"
        },
        "inLanguage": "cs-CZ",
        "potentialAction": {
          "@type": "CommunicateAction",
          "name": "Kontaktovat Farmasi",
          "target": [
            {
              "@type": "EntryPoint",
              "urlTemplate": "mailto:farmasi@freedomfashion.cz",
              "actionPlatform": [
                "http://schema.org/DesktopWebPlatform",
                "http://schema.org/MobileWebPlatform"
              ]
            },
            {
              "@type": "EntryPoint",
              "urlTemplate": "tel:+420776487352",
              "actionPlatform": [
                "http://schema.org/DesktopWebPlatform",
                "http://schema.org/MobileWebPlatform"
              ]
            }
          ]
        }
      },
      {
        "@type": "BreadcrumbList",
        "@id": "https://farmasi.freedomfashion.cz/registrace.html#breadcrumbs",
        "itemListElement": [
          {
            "@type": "ListItem",
            "position": 1,
            "name": "Domů",
            "item": "https://farmasi.freedomfashion.cz/"
          },
          {
            "@type": "ListItem",
            "position": 2,
            "name": "Registrace / Kontakt",
            "item": "https://farmasi.freedomfashion.cz/registrace.html"
          }
        ]
      },
      {
        "@type": "FAQPage",
        "@id": "https://farmasi.freedomfashion.cz/registrace.html#faq",
        "mainEntity": [
          {
            "@type": "Question",
            "name": "Co mi registrace do Farmasi přinese?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Registrací získáte okamžitou slevu 23 % na všechny produkty Farmasi. Zároveň máte možnost výhodně nakupovat dlouhodobě a případně si přivydělat doporučováním produktů."
            }
          },
          {
            "@type": "Question",
            "name": "Je registrace do Farmasi zdarma?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Ano. Registrace je zcela zdarma a není s ní spojen žádný vstupní poplatek ani povinné nákupy."
            }
          },
          {
            "@type": "Question",
            "name": "Musím po registraci kosmetiku prodávat?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Ne. Registrace vás k ničemu nezavazuje. Mnoho zákaznic se registruje pouze proto, aby mohly nakupovat kosmetiku se slevou pro vlastní potřebu."
            }
          },
          {
            "@type": "Question",
            "name": "Jak dlouho registrace trvá?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Registrace je rychlá a jednoduchá. Zabere přibližně 2 minuty a výhody můžete využívat ihned po dokončení."
            }
          },
          {
            "@type": "Question",
            "name": "Mohu se zaregistrovat, i když chci jen slevu?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Ano. Registrace je vhodná i pro zákaznice, které chtějí pouze výhodně nakupovat kosmetiku se slevou a neřeší přivýdělek."
            }
          },
          {
            "@type": "Question",
            "name": "Jak funguje sleva 23 % po registraci?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Po registraci se vám automaticky odečte 23% sleva z cen produktů při nákupu. Sleva platí na celý sortiment Farmasi."
            }
          },
          {
            "@type": "Question",
            "name": "Je registrace časově nebo smluvně vázaná?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Ne. Registrace není časově omezená a není spojena s žádnými smluvními závazky. Kdykoliv můžete zůstat neaktivní."
            }
          },
          {
            "@type": "Question",
            "name": "Mohu se později rozhodnout pro spolupráci?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Ano. Pokud se později rozhodnete produkty doporučovat nebo budovat tým, máte tuto možnost. Není to ale podmínkou registrace."
            }
          },
          {
            "@type": "Question",
            "name": "Jak mi pomůžete s registrací nebo výběrem produktů?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Pokud si nejste jistí, rádi vám poradíme s registrací i výběrem kosmetiky. Stačí nás kontaktovat přes formulář, e-mail nebo telefon."
            }
          },
          {
            "@type": "Question",
            "name": "Pro koho je registrace Farmasi vhodná?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Registrace je vhodná pro ženy, které chtějí kvalitní kosmetiku se slevou, hledají dlouhodobě výhodný nákup nebo zvažují nezávazný přivýdělek."
            }
          }
        ]
      }
    ]
  }
  </script>

  <script>
    // ============================================
    // CONFIGURATION
    // ============================================
    const CONFIG = {
      SCRIPT_ENDPOINT_URL: 'https://script.google.com/macros/s/AKfycbyQv5nbW9hYgYIkjly9TcHlmXiBqziwphceqBv8GGMfDe8wk04dp7DGOlXKfg73gKhVAA/exec',
      SECRET_TOKEN: '1506-123-12-157489-13589-farmasi'
    };
    // ============================================

    // Set source URL
    document.getElementById('source').value = window.location.href;

    const form = document.getElementById('contact-form');
    const submitBtn = document.getElementById('submit-btn');
    const messagesDiv = document.getElementById('form-messages');
    let isSubmitting = false;

    // Clear error messages
    function clearErrors() {
      document.querySelectorAll('.error-message').forEach(el => el.textContent = '');
      messagesDiv.innerHTML = '';
    }

    // Show error message
    function showError(fieldId, message) {
      const errorEl = document.getElementById(fieldId + '-error');
      if (errorEl) {
        errorEl.textContent = message;
      }
    }

    // Show success/error message
    function showMessage(type, text) {
      messagesDiv.innerHTML = `<div class="${type === 'success' ? 'success-message' : 'error-message'}">${text}</div>`;
      
      if (type === 'success') {
        // Scroll to top
        messagesDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
      }
    }

    // Validate form
    function validateForm() {
      clearErrors();
      let isValid = true;

      // Name required
      const name = document.getElementById('name').value.trim();
      if (!name) {
        showError('name', 'Jméno a příjmení je povinné');
        isValid = false;
      }

      // Phone required
      const phone = document.getElementById('phone').value.trim();
      if (!phone) {
        showError('phone', 'Telefon je povinný');
        isValid = false;
      }

      // Message required
      const message = document.getElementById('message').value.trim();
      if (!message) {
        showError('message', 'Zpráva je povinná');
        isValid = false;
      }

      // Email validation if filled (optional)
      const email = document.getElementById('email').value.trim();
      if (email && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
        showError('email', 'Zadejte platnou e-mailovou adresu');
        isValid = false;
      }

      // GDPR required
      const gdpr = document.getElementById('gdpr').checked;
      if (!gdpr) {
        showError('gdpr', 'Musíte souhlasit se zpracováním osobních údajů');
        isValid = false;
      }

      // Honeypot check
      const website = document.getElementById('website').value;
      if (website) {
        isValid = false; // Bot detected, don't submit
      }

      return isValid;
    }

    // Form submission
    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      // Prevent double submit
      if (isSubmitting) {
        return;
      }

      // Validate
      if (!validateForm()) {
        return;
      }

      // Check honeypot
      const website = document.getElementById('website').value;
      if (website) {
        return; // Bot detected, silently fail
      }

      // Disable button and show loading
      isSubmitting = true;
      submitBtn.disabled = true;
      const originalText = submitBtn.textContent;
      submitBtn.textContent = 'Odesílám…';

      // Prepare data
      const formDataObj = {
        token: CONFIG.SECRET_TOKEN,
        name: document.getElementById('name').value.trim(),
        email: document.getElementById('email').value.trim() || '',
        phone: document.getElementById('phone').value.trim() || '',
        message: document.getElementById('message').value.trim() || '',
        source: document.getElementById('source').value,
        website: ''
      };

      try {
        console.log('Sending data:', formDataObj);
        
        // Použijeme JSONP přístup - obejde CORS pomocí <script> tagu
        const jsonData = JSON.stringify(formDataObj);
        const url = CONFIG.SCRIPT_ENDPOINT_URL + '?data=' + encodeURIComponent(jsonData) + '&callback=handleFormResponse';
        
        // Vytvoříme callback funkci
        let callbackCalled = false;
        window.handleFormResponse = function(response) {
          callbackCalled = true;
          console.log('Response received:', response);
          
          // Odstraníme script tag a timeout
          const script = document.getElementById('jsonp-script');
          if (script) script.remove();
          if (window.jsonpTimeout) clearTimeout(window.jsonpTimeout);
          delete window.handleFormResponse;
          delete window.jsonpTimeout;
          
          if (response && response.ok) {
            showMessage('success', '✓ Odesláno! Děkujeme za váš zájem, brzy se vám ozveme.');
            form.reset();
            document.getElementById('source').value = window.location.href;
            setTimeout(() => {
              messagesDiv.innerHTML = '';
            }, 5000);
          } else {
            showMessage('error', '❌ Chyba při odesílání: ' + (response.error || 'Neznámá chyba'));
          }
        };
        
        // Timeout - pokud se callback nevolá do 3 sekund, předpokládáme úspěch
        // (protože data se zapisují do Sheets a email se posílá)
        window.jsonpTimeout = setTimeout(function() {
          if (!callbackCalled) {
            console.log('JSONP timeout - assuming success (data is being saved)');
            const script = document.getElementById('jsonp-script');
            if (script) script.remove();
            delete window.handleFormResponse;
            delete window.jsonpTimeout;
            
            showMessage('success', '✓ Odesláno! Děkujeme za váš zájem, brzy se vám ozveme.');
            form.reset();
            document.getElementById('source').value = window.location.href;
            setTimeout(() => {
              messagesDiv.innerHTML = '';
            }, 5000);
          }
        }, 3000);
        
        // Vytvoříme a přidáme script tag
        const script = document.createElement('script');
        script.id = 'jsonp-script';
        script.src = url;
        script.onerror = function() {
          console.error('JSONP request failed');
          if (!callbackCalled) {
            if (window.jsonpTimeout) clearTimeout(window.jsonpTimeout);
            delete window.handleFormResponse;
            delete window.jsonpTimeout;
            // Nezobrazíme chybu, protože data se možná zapisují
            // Předpokládáme úspěch
            showMessage('success', '✓ Odesláno! Děkujeme za váš zájem, brzy se vám ozveme.');
            form.reset();
            document.getElementById('source').value = window.location.href;
            setTimeout(() => {
              messagesDiv.innerHTML = '';
            }, 5000);
          }
          script.remove();
        };
        document.head.appendChild(script);

      } catch (error) {
        console.error('Error details:', error);
        console.error('Error message:', error.message);
        console.error('Error stack:', error.stack);
        
        // Zobrazíme detailnější chybovou hlášku
        const errorMsg = error.message || 'Neznámá chyba';
        showMessage('error', '❌ Chyba při odesílání: ' + errorMsg + '. Zkuste to prosím znovu později nebo nás kontaktujte přímo na farmasi@freedomfashion.cz');
      } finally {
        // Re-enable button
        isSubmitting = false;
        submitBtn.disabled = false;
        submitBtn.textContent = originalText;
      }
    });

    // Real-time validation
    document.getElementById('email').addEventListener('blur', function() {
      const email = this.value.trim();
      if (email && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
        showError('email', 'Zadejte platnou e-mailovou adresu');
      } else {
        showError('email', '');
      }
    });

  </script>
</body>
</html>
